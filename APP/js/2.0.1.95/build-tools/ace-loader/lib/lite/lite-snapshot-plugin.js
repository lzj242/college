"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var _require=require("child_process"),exec=_require.exec,_path=require("path"),snapshot=_path.join(__dirname,"..","..","bin","jerry-snapshot"),registerRequireContextHook=require("babel-plugin-require-context-hook/register");registerRequireContextHook();var SnapshotPlugin=function(){function e(t){_classCallCheck(this,e),this.options=t}return _createClass(e,[{key:"getDir",value:function(e,t){var n=[];return Object.keys(e).map(function(e){/.js$/.test(e)&&n.push(_path.join(t,e))}),n}},{key:"apply",value:function(e){var t=this,n=this.options.build;e.hooks.done.tap("snapshot coverter",function(e){t.getDir(e.compilation.assets,n).forEach(function(e){var t=e.replace(".js",".bc"),n=_path.basename(e);exec('"'.concat(snapshot,'" generate -o "').concat(t,'" "').concat(e,'"'),function(e){e&&console.error("[31m","Failed to convert the ".concat(n," file to a snapshot."),"[39m")})})})}}]),e}();module.exports=SnapshotPlugin;