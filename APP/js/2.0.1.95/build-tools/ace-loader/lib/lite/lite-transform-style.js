"use strict";function _createForOfIteratorHelper(r){if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(r=_unsupportedIterableToArray(r))){var t=0,e=function(){};return{s:e,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(r){throw r},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,i=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return o=r.done,r},e:function(r){i=!0,a=r},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var _require=require("./lite-enum"),SPECIAL_STYLE=_require.SPECIAL_STYLE,REGEXP_NUMBER_PX=_require.REGEXP_NUMBER_PX,REGEXP_COLOR=_require.REGEXP_COLOR,REGEXP_UNIT=_require.REGEXP_UNIT,REGXP_QUOTES=_require.REGXP_QUOTES;function transformStyle(r){for(var t=Function("return ".concat(r))(),e={},n={},a={},o=Object.keys(t),i=0,c=o;i<c.length;i++){var u=c[i];"."===u.charAt(0)?n[u.slice(1)]=styleFormat(t[u]):"#"===u.charAt(0)?e[u.slice(1)]=styleFormat(t[u]):"@KEYFRAMES"===u&&(a["@keyframes"]=keyFrameFormat(t[u]))}return null!=t&&0!==o.length&&(0!==Object.keys(e).length&&(a.idSelectors=e),0!==Object.keys(n).length&&(a.classSelectors=n)),JSON.stringify(a)}function keyFrameFormat(r){for(var t=0,e=Object.keys(r);t<e.length;t++){var n,a=_createForOfIteratorHelper(r[e[t]]);try{for(a.s();!(n=a.n()).done;)for(var o=n.value,i=0,c=Object.keys(o);i<c.length;i++){var u=c[i],l=o[u];REGEXP_COLOR.test(l)&&(o[u]=parseInt(l.slice(1),16));try{o[u]=JSON.parse(o[u])}catch(r){}}}catch(r){a.e(r)}finally{a.f()}}return r}var rules=[{match:function(r,t){return r===SPECIAL_STYLE.ANIMATION_DELAY||r===SPECIAL_STYLE.ANIMATION_DURATION},action:function(r,t,e){r[t]=e}},{match:function(r,t){return r===SPECIAL_STYLE.ANIMATION_ITERATION_COUNT},action:function(r,t,e){-1===e&&(e="infinite"),r[t]=e.toString()}},{match:function(r,t){return r===SPECIAL_STYLE.BACKGROUND_IMAGE},action:function(r,t,e){r[t]=e.replace(REGXP_QUOTES,"")}},{match:function(r,t){return!isNaN(Number(t))},action:function(r,t,e){r[t]=Number(e)}},{match:function(r,t){return REGEXP_NUMBER_PX.test(t)},action:function(r,t,e){r[t]=parseInt(e.replace(REGEXP_UNIT,""),10)}},{match:function(r,t){return REGEXP_COLOR.test(t)},action:function(r,t,e){r[t]=parseInt(e.slice(1),16)}},{match:function(r,t){return"true"===t},action:function(r,t,e){r[t]=!0}},{match:function(r,t){return"false"===t},action:function(r,t,e){r[t]=!1}}];function styleFormat(r){for(var t="",e=0,n=Object.keys(r);e<n.length;e++){var a=n[e];t=r[a];for(var o=0;o<rules.length;o++)if(rules[o].match(a,t)){rules[o].action(r,a,t);break}}return r}exports.transformStyle=transformStyle;