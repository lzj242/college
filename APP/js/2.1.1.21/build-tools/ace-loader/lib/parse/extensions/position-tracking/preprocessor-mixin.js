"use strict";const Mixin=require("../../utils/mixin");class PositionTrackingPreprocessorMixin extends Mixin{constructor(s){super(s),this.preprocessor=s,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(s,i){return{advance(){const t=this.pos+1,e=this.html[t];return s.isEol&&(s.isEol=!1,s.line++,s.lineStartPos=t),("\n"===e||"\r"===e&&"\n"!==this.html[t+1])&&(s.isEol=!0),s.col=t-s.lineStartPos+1,s.offset=s.droppedBufferSize+t,i.advance.call(this)},retreat(){i.retreat.call(this),s.isEol=!1,s.col=this.pos-s.lineStartPos+1},dropParsedChunk(){const t=this.pos;i.dropParsedChunk.call(this);const e=t-this.pos;s.lineStartPos-=e,s.droppedBufferSize+=e,s.offset=s.droppedBufferSize+this.pos}}}}module.exports=PositionTrackingPreprocessorMixin;